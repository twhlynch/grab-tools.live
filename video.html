<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video to Grab | GRAB Tools</title>
    <meta name="description" content="A collection of tools for modding GrabVR, stats about players and levels, resources, and more.">
    <meta name="keywords" content="grab mods stats tools grabvr .index index dotindex tom lynch twhlynch vr modding hacks discord programming coding website development developer github">
    <meta name="author" content="twhlynch">
    <meta property="og:title" content="Video Gen | GRAB Tools">
    <meta property="og:description" content="A collection of tools for modding GrabVR, stats about players and levels, resources, and more.">
    <meta property="og:site_name" content="Video Gen | GRAB Tools">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="website">
    <meta property="og:url" content="http://grab-tools.live/video">
    <meta property="og:image" content="http://grab-tools.live/favicon.gif">
    <link rel="icon" href="favicon.gif" type="image/gif">
    <link rel="shortcut icon" href="favicon.gif" type="image/x-icon">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-BDS57RBQ3Q"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-BDS57RBQ3Q');
    </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2378042345376266" crossorigin="anonymous"></script>
    <script async custom-element="amp-ad" src="https://cdn.ampproject.org/v0/amp-ad-0.1.js"></script>
    <link rel="stylesheet" href="styles/style.css">
    <script src="main.js" defer></script>
    <script>
        async function processVideo() {
            const fileInput = document.getElementById("videoFile");
            const videoFile = fileInput.files[0];

            const formData = new FormData();
            formData.append("file", videoFile);

            try {
                const response = await fetch(
                    "https://dotindex.pythonanywhere.com/process_video",
                    {
                        method: "POST",
                        body: formData,
                    }
                );

                if (!response.ok) {
                    throw new Error("Error processing video");
                }

                const processedFile = await response.blob();
                const downloadLink = URL.createObjectURL(processedFile);

                const link = document.createElement("a");
                link.href = downloadLink;
                link.download = `${Math.floor(Date.now() / 1000)}.level`;
                link.click();

                URL.revokeObjectURL(downloadLink);
            } catch (error) {
                console.error(error);
            }
        }
    </script>
</head>
<body>
    <div id="cursor-outer"></div>
    <div id="cursor-inner"></div>
    <!-- <h1 class="title">Grab</h1> -->
    <nav>
        <a href="/" class="button">Home</a>
        <a href="/list" class="button">List</a>
        <a href="/stats" class="button">Stats</a>
        <a href="/tools" class="button">Tools</a>
        <a href="/discord" class="button">Discord</a>
        <a href="https://wiki.grab-tools.live" class="button">Wiki</a>
    </nav>
    <main>
        <section id="video-section">
            <h1>Video Generator (Mp42Grab)</h1>
            <p>15 second max length. Output will always be 20x20. This is a demo. The full script can be found <a href="https://github.com/twhlynch/Mp42Grab">here</a> to download.</p>
            <div id="video-buttons">
                <input type="file" id="videoFile" />
                <button class="button" onclick="processVideo()">Process Video</button>
            </div>
        </section>
    </main>
    <footer>
        <span>twhlynch</span><span>|</span><span>.index</span>
        <div id="ads"></div>
    </footer>
</body>
</html>
